const chai = require('chai');
const expect = chai.expect;
const should = chai.should();
const url = 'http://localhost:4000/';
const request = require('supertest')(url);

const resolver = require('../resolvers/user')
const server = require('../server')

describe('GraphQL', () => {
  it('Returns user with id = 1' , (done) => {
        request.post('graphql')
        .query({ id: 10 })
        //.send({ Query: '{ user(id=10) {id name  email} }'})
        //.expect(200)
        .end((err,res) => {
          console.log("Url is ========",url);
          console.log("Response Body  is &&&&&&&&&&&&&&&&7",res.body);
        console.log("Response is*********** ",res);
            if(err) return done(err);
            res.body.user.should.have.property('id')
            res.body.user.should.have.property('name')
            res.body.user.should.have.property('email')
        })
  })

  it('returns all users', (done)=> {
      request.post('graphql')
      .send({ Query: '{ user { id name email } }'})
      //.expect(200)
      .end((err,res) => {
        
        // console.log("Response Body  is &&&&&&&&&&&&&&&&7",res.body);
        // console.log("Response is*********** ",res);
        if(err) return done(err);
        res.body.user.should.have.lengthOf(29);
      })
  })
})